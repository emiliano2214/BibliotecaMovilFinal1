@page "/libros"
@using BibliotecaMovil.Shared.DTOs
@using BibliotecaMovil.Shared.Interfaces
@inject ILibroService LibroService

<div style="background:#777FF5; min-height:100vh; display:flex; flex-direction:column;">
    <!-- Header -->
    <div style="padding:60px 20px 20px 20px; display:grid; grid-template-columns:auto auto auto;">
        <div style="grid-column:1 / span 3; font-size:28px; font-weight:bold;">Libros</div>

        <div style="margin-top:30px; width:40px; height:40px; background:#0050FF;"></div>

        <!-- Menú -> /menu -->
        <NavLink href="/menu" style="text-decoration:none; color:black; display:block;">
            <div style="background:#0050FF; padding:8px 6px; display:flex; flex-direction:column; gap:3px; cursor:pointer;">
                <div style="height:2px; width:20px; background:black;"></div>
                <div style="height:2px; width:20px; background:black;"></div>
                <div style="height:2px; width:20px; background:black;"></div>
            </div>
        </NavLink>
    </div>

    <!-- Lista -->
    <div style="flex:1; background:white;">
        <div style="padding:10px 20px; font-weight:bold;">Lista de Libros</div>
        <div>
            @if (libros == null)
            {
                <div style="padding:20px;">Cargando...</div>
            }
            else if (!libros.Any())
            {
                <div style="padding:20px;">No hay libros disponibles.</div>
            }
            else
            {
                @foreach (var libro in libros)
                {
                    <div style="display:grid; grid-template-columns:1fr auto; align-items:center; margin:10px 0; padding:10px 20px; border-bottom:2px solid #777FF5;">
                        <div>@libro.Titulo</div>
                        <div style="font-size:24px;">☆</div>
                    </div>
                }
            }
        </div>
    </div>
</div>

@code {
    private List<LibroDto>? libros;

    protected override async Task OnInitializedAsync()
    {
        libros = await LibroService.GetLibrosAsync();
    }
}
